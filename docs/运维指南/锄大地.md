# 大地图录制

当前录制主要是为了补充大地图上的特殊图标信息，这些图标可以辅助坐标识别，并且也是当前最有效的计算坐标方法。

为什么靠黑白地图计算坐标的效果不好：

1. 黑白图上信息太少，使用模板匹配很容易歪。
2. 小地图的半透明显示，很容易受背景污染，导致没有有效的颜色范围可以处理所有情况，最终结果就是小地图的道理提取效果不稳定。

## 地图来源

待暗檬补充

## 录制过程

0. 原图是黑白+透明3通道，需要先使用 large_map_recorder_utils.__debug_read_extract 转化成 黑白2通道。
1. 复制大地图到对应文件夹中 `assets/game_data/world_patrol/xx/yy`，取名 `road_mask.png`。
2. 进入 `大地图录制` 界面，选择对应区域加载。
3. 游戏里，找一个小地图上看到道路形状很不规则的位置，越不规则越好。转动视角让小地图背景尽量暗，然后截图。
4. 调整大地图的缩放，通常是 40% 左右，但每张地图不一样。
5. 使用 `定位` 和 `重叠`，看小地图能否和大地图完全重叠。如果不能重叠，则按取消重新加载。
6. 重复4~5，直到找一个合适的缩放比例。保存。
7. 到各个特殊点的地方截图，然后 `定位` -> `合并`。
8. 如果出现未识别的地图图标，则需要截图后，从小地图上扣图，保存到 `assets/template/map/map_icon_xx/raw.png`。然后使用 `map_icon_utils` 按颜色过滤。
9. `编辑图标` -> 给传送点(mm_icon_01)的填上具体的传送点名称。
10. 所有图标增加后就完成了。

# 路线录制

目前路线只能尽量走有图标的地方，对于没有图标的地方，只能看运气。
